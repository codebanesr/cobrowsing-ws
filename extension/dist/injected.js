!function(){let e=!0,t=0;function a(e){if(!e)return"";if(e.id)return`#${e.id}`;if(e.className&&"string"==typeof e.className){const t=e.className.trim().split(/\s+/).slice(0,3);if(t.length>0&&t[0])return`${e.tagName.toLowerCase()}.${t.join(".")}`}for(let t of e.attributes)if(t.name.startsWith("data-")&&t.value)return`${e.tagName.toLowerCase()}[${t.name}="${t.value}"]`;const t=e.parentElement;if(t){const n=Array.from(t.children).filter(t=>t.tagName===e.tagName).indexOf(e)+1;return`${a(t)} > ${e.tagName.toLowerCase()}:nth-child(${n})`}return e.tagName.toLowerCase()}function n(e,t){window.dispatchEvent(new CustomEvent("cobrowsing-event",{detail:{type:e,data:t}}))}window.addEventListener("scroll",()=>{if(!e)return;const a=Date.now();a-t<100||(t=a,n("scroll",{x:window.scrollX,y:window.scrollY}))},{passive:!0}),document.addEventListener("click",t=>{if(!e)return;const r=a(t.target);n("click",{selector:r,x:t.clientX,y:t.clientY,tagName:t.target.tagName,href:t.target.href||null}),n("element-highlight",{clientX:t.clientX,clientY:t.clientY,selector:r,tagName:t.target.tagName,className:t.target.className,id:t.target.id})},!0),document.addEventListener("input",t=>{!e||"INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName||n("input",{selector:a(t.target),value:t.target.value,type:t.target.type,selectionStart:t.target.selectionStart,selectionEnd:t.target.selectionEnd})},!0),document.addEventListener("selectionchange",()=>{if(!e)return;const t=document.activeElement;!t||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName||n("selection-change",{selector:a(t),selectionStart:t.selectionStart,selectionEnd:t.selectionEnd})}),document.addEventListener("submit",t=>{if(!e)return;const r=a(t.target),i=new FormData(t.target),o={};for(let[e,t]of i.entries())o[e]=t;n("form-submit",{formSelector:r,action:t.target.action,method:t.target.method,data:o})},!0),document.addEventListener("focus",t=>{!e||"INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName&&"true"!==t.target.contentEditable||n("focus",{selector:a(t.target)})},!0);let r=0,i=null;document.addEventListener("mousemove",t=>{if(!e)return;const o=Date.now();if(o-r<200)return;const s=t.target;s!==i&&(r=o,i=s,n("element-highlight",{clientX:t.clientX,clientY:t.clientY,selector:a(s),tagName:s.tagName,className:s.className,id:s.id}))},{passive:!0}),window.addEventListener("message",t=>{t.source===window&&"cobrowsing-control-change"===t.data.type&&(e=t.data.isController)}),console.log("Co-browsing injected script loaded")}();