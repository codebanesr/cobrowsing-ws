!function(){let t=!0,e=0;function a(t){if(!t)return"";if(t.id)return`#${t.id}`;if(t.className&&"string"==typeof t.className){const e=t.className.trim().split(/\s+/).slice(0,3);if(e.length>0&&e[0])return`${t.tagName.toLowerCase()}.${e.join(".")}`}for(let e of t.attributes)if(e.name.startsWith("data-")&&e.value)return`${t.tagName.toLowerCase()}[${e.name}="${e.value}"]`;const e=t.parentElement;if(e){const r=Array.from(e.children).filter(e=>e.tagName===t.tagName).indexOf(t)+1;return`${a(e)} > ${t.tagName.toLowerCase()}:nth-child(${r})`}return t.tagName.toLowerCase()}function r(t,e){window.dispatchEvent(new CustomEvent("cobrowsing-event",{detail:{type:t,data:e}}))}window.addEventListener("scroll",()=>{if(!t)return;const a=Date.now();a-e<100||(e=a,r("scroll",{x:window.scrollX,y:window.scrollY}))},{passive:!0}),document.addEventListener("click",e=>{t&&r("click",{selector:a(e.target),x:e.clientX,y:e.clientY,tagName:e.target.tagName,href:e.target.href||null})},!0),document.addEventListener("input",e=>{!t||"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName||r("input",{selector:a(e.target),value:e.target.value,type:e.target.type})},!0),document.addEventListener("submit",e=>{if(!t)return;const n=a(e.target),o=new FormData(e.target),i={};for(let[t,e]of o.entries())i[t]=e;r("form-submit",{formSelector:n,action:e.target.action,method:e.target.method,data:i})},!0),document.addEventListener("focus",e=>{!t||"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&"true"!==e.target.contentEditable||r("focus",{selector:a(e.target)})},!0),window.addEventListener("message",e=>{e.source===window&&"cobrowsing-control-change"===e.data.type&&(t=e.data.isController)}),console.log("Co-browsing injected script loaded")}();